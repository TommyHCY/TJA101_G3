<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>Pixel Tribe</title>
<link
	href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=ZCOOL+KuaiLe&display=swap"
	rel="stylesheet">
<style>
html, body {
	height: 100%;
	margin: 0;
	padding: 0;
	background: #f7f4ed;
	font-family: 'ZCOOL KuaiLe', Arial, sans-serif;
	box-sizing: border-box;
	width: 100vw;
	overflow-x: hidden;
}

body {
	min-height: 100vh;
}

.topbar {
	width: 100%;
	height: 56px;
	background: #fff;
	display: flex;
	justify-content: space-between;
	align-items: center;
	box-shadow: 0 2px 8px #0001;
	padding: 0 32px;
	position: relative;
	z-index: 10;
	box-sizing: border-box;
}

.topbar-logo {
	height: 40px;
	display: flex;
	align-items: center;
}

.topbar-logo img {
	height: 40px;
	width: auto;
	object-fit: contain;
	border-radius: 6px;
}

.member-area {
	display: flex;
	align-items: center;
	gap: 14px;
}

.avatar-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	margin-right: 5px;
	transition: box-shadow 0.18s;
}

.avatar-btn img {
	width: 38px;
	height: 38px;
	object-fit: cover;
	border-radius: 50%;
	border: 2px solid #d88e24;
	background: #fffbe7;
	box-shadow: 0 2px 6px #0001;
	transition: border 0.15s;
}

.avatar-btn:hover img {
	border: 2px solid #c06a12;
}

.member-name {
	font-family: 'ZCOOL KuaiLe', Arial, sans-serif;
	color: #d88e24;
	font-size: 1.05rem;
}

.member-btn {
	background: #fffbe7;
	border: 1px solid #d88e24;
	color: #d88e24;
	border-radius: 6px;
	padding: 6px 16px;
	font-family: 'ZCOOL KuaiLe', Arial, sans-serif;
	cursor: pointer;
	font-size: 1rem;
	transition: background .15s;
}

.member-btn:hover {
	background: #ffe7b3;
}

.banner {
	width: 100%;
	height: 220px;
	background: #fff;
	display: flex;
	justify-content: center;
	align-items: center;
	box-shadow: 0 2px 8px #0001;
	overflow: hidden;
	position: relative;
}

.banner img {
	width: 100%;
	height: 100%;
	object-fit: cover;
	border-radius: 0;
	display: block;
}

.container {
	display: flex;
	width: 100%;
	max-width: 1300px;
	margin: 0 auto;
	margin-top: 24px;
	min-height: 700px;
	box-sizing: border-box;
	padding: 0 16px;
}

.sidebar {
	width: 210px;
	min-width: 60px;
	background: #fff;
	border-radius: 14px;
	margin-right: 30px;
	padding: 36px 0 24px 0;
	box-shadow: 0 2px 12px #0001;
	height: fit-content;
	box-sizing: border-box;
	transition: width 0.2s;
	position: relative;
	overflow: hidden; /* 關鍵：避免反白溢出 */
}

.sidebar.collapsed {
	width: 60px;
	min-width: 60px;
	padding-right: 0;
}

.sidebar-toggle {
	position: absolute;
	left: 50%;
	top: 14px;
	transform: translateX(-50%);
	width: 36px;
	height: 36px;
	background: #fffbe7;
	border: 1px solid #d88e24;
	border-radius: 50%;
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 1.3rem;
	color: #d88e24;
	z-index: 2;
	transition: background 0.15s;
}

.sidebar-toggle:hover {
	background: #ffe7b3;
}

.sidebar ul {
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	margin-top: 48px;
	width: 100%;
	transition: all 0.2s;
	list-style: none;
	padding: 0;
}

.sidebar.collapsed ul {
	align-items: center;
	margin-top: 48px;
}

.sidebar li {
	width: calc(100% - 12px);
	margin-left: 6px; /* 讓左邊線&背景不會溢出sidebar */
	box-sizing: border-box;
	justify-content: flex-start;
	padding: 16px 0 16px 0;
	display: flex;
	align-items: center;
	color: #555;
	font-size: 1.08rem;
	font-family: 'ZCOOL KuaiLe', Arial, sans-serif;
	cursor: pointer;
	border-left: 3px solid transparent;
	border-radius: 8px;
	transition: background .18s, border-color .18s, justify-content .2s;
	white-space: nowrap;
}

.sidebar.collapsed li {
	justify-content: center;
	width: 48px;
	margin-left: 0;
	padding-top: 18px;
	padding-bottom: 18px;
}

.sidebar li.active, .sidebar li:hover {
	color: #d88e24;
	font-weight: bold;
	border-left: 3px solid #d88e24;
	background: #fffbe7;
}

.sidebar li .icon {
	margin-right: 11px;
	font-size: 1.2rem;
	transition: margin 0.2s;
	display: flex;
	align-items: center;
	justify-content: center;
}

.sidebar.collapsed li .icon {
	margin-right: 0;
}

.sidebar.collapsed li span:not(.icon) {
	display: none;
}

.main-content {
	flex: 1;
	min-width: 0;
	background: #fff;
	border-radius: 14px;
	box-shadow: 0 2px 12px #0001;
	padding: 32px 28px;
	box-sizing: border-box;
	overflow-x: auto;
}

.footer {
	margin-top: 32px;
	background: #f3f3f3;
	padding: 30px 0 18px 0;
	text-align: center;
	color: #807457;
	font-size: 1.08rem;
	letter-spacing: 1px;
}

/* 商城相關樣式 */
.shop-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 24px;
	border-bottom: 2px solid #ffe7b3;
	padding-bottom: 16px;
}

.shop-title {
	font-family: 'Press Start 2P', Arial, sans-serif;
	color: #d88e24;
	font-size: 1.5rem;
	margin: 0;
}

.cart-button {
	background: #d88e24;
	border: 2px solid #d88e24;
	color: #fff;
	border-radius: 8px;
	padding: 12px 20px;
	font-family: 'Press Start 2P', Arial, sans-serif;
	cursor: pointer;
	font-size: 0.8rem;
	transition: all .15s;
	display: flex;
	align-items: center;
	gap: 8px;
	text-decoration: none;
}

.cart-button:hover {
	background: #c17a1f;
	border-color: #c17a1f;
	transform: translateY(-2px);
	box-shadow: 0 4px 8px rgba(216, 142, 36, 0.3);
}

.cart-icon {
	font-size: 1.2rem;
}

.shop-content {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
	gap: 20px;
	margin-top: 24px;
}

.product-card {
	background: #fffbe7;
	border: 2px solid #d88e24;
	border-radius: 10px;
	padding: 16px;
	text-align: center;
	transition: transform .15s, box-shadow .15s;
}

.product-card:hover {
	transform: translateY(-3px);
	box-shadow: 0 6px 12px rgba(216, 142, 36, 0.2);
}

.product-image {
	width: 100%;
	height: 150px;
	background: #f8f9fa;
	border: 2px solid #d88e24;
	border-radius: 6px;
	margin-bottom: 12px;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 3rem;
}

.product-name {
	font-family: 'Press Start 2P', Arial, sans-serif;
	color: #d88e24;
	font-size: 0.9rem;
	margin-bottom: 8px;
}

.product-price {
	font-family: 'ZCOOL KuaiLe', Arial, sans-serif;
	color: #666;
	font-size: 1.1rem;
	margin-bottom: 12px;
}

.add-to-cart-btn {
	background: #fffbe7;
	border: 1px solid #d88e24;
	color: #d88e24;
	border-radius: 6px;
	padding: 8px 16px;
	font-family: 'ZCOOL KuaiLe', Arial, sans-serif;
	cursor: pointer;
	font-size: 0.9rem;
	transition: background .15s;
	width: 100%;
}

.add-to-cart-btn:hover {
	background: #ffe7b3;
}

@media ( max-width : 1300px) {
	.container {
		max-width: 100vw;
		padding: 0 8px;
	}
}

@media ( max-width : 950px) {
	.container {
		flex-direction: column;
		max-width: 100vw;
		padding: 0 4vw;
	}
	.sidebar {
		margin-right: 0;
		margin-bottom: 18px;
		width: 100%;
		min-width: 0;
		position: static;
	}
	.sidebar.collapsed {
		width: 100%;
		min-width: 0;
	}
	.main-content {
		width: 100%;
		padding: 24px 10px;
	}
	.topbar {
		flex-direction: column;
		align-items: flex-start;
		height: auto;
		padding: 8px 16px;
	}
	.topbar-logo {
		margin-bottom: 8px;
	}
	.sidebar-toggle {
		left: 50%;
		right: unset;
		top: 14px;
		transform: translateX(-50%);
	}
	.shop-header {
		flex-direction: column;
		gap: 16px;
		align-items: flex-start;
	}
}

@media ( max-width : 650px) {
	.container {
		padding: 0 2vw;
	}
	.main-content {
		padding: 14px 2vw;
	}
	.sidebar {
		padding: 18px 0 12px 0;
	}
	.topbar {
		padding: 8px 4vw;
	}
	.shop-content {
		grid-template-columns: 1fr;
	}
}
/* 論壇表格像素風格 */
.forum-list-section h2 {
	font-family: 'ZCOOL KuaiLe', Arial, sans-serif;
	color: #d88e24;
	margin-bottom: 18px;
}

.forum-table {
	width: 100%;
	border-collapse: collapse;
	background: #fffbe7;
	border-radius: 10px;
	overflow: hidden;
	box-shadow: 0 2px 8px #0001;
	font-family: 'ZCOOL KuaiLe', Arial, sans-serif;
}

.forum-table th, .forum-table td {
	border: 1px solid #d88e24;
	padding: 12px 10px;
	text-align: left;
}

.forum-table th {
	background: #ffe7b3;
	color: #d88e24;
	font-family: 'ZCOOL KuaiLe', Arial, sans-serif;
}

.forum-table tr:nth-child(even) {
	background: #fff;
}

.forum-table tr:hover {
	background: #ffe7b3;
}

.forum-btn {
	background: #fffbe7;
	border: 1px solid #d88e24;
	color: #d88e24;
	border-radius: 6px;
	padding: 4px 12px;
	font-family: 'ZCOOL KuaiLe', Arial, sans-serif;
	cursor: pointer;
	font-size: 1rem;
	transition: background .15s;
}

.forum-btn:hover {
	background: #ffe7b3;
}
/* 像素風icon調整 */
.sidebar .icon svg {
	width: 22px;
	height: 22px;
	display: inline-block;
	vertical-align: middle;
}
</style>
</head>
<body>
	<!-- 右上角會員功能與LOGO -->
	<div class="topbar">
		<div class="topbar-logo" id="logo-btn" style="cursor: pointer;">
			<img src="images/logo.png" alt="LOGO">
		</div>
		<div class="member-area">
			<div class="avatar-btn" id="avatar-btn" title="會員中心">
				<img id="member-avatar" src="images/default-avatar.png" alt="會員頭像">
			</div>
			<span class="member-name" id="member-name"></span>
			<button class="member-btn" id="login-btn"
				onclick="location.href='/front-end/mem/MemberConsole.html'">會員中心</button>
			<button class="member-btn" id="register-btn"
				onclick="location.href='/front-end/mem/MemRegisterPage.html'">註冊</button>
			<button class="member-btn" id="logout-btn">登出</button>
		</div>
	</div>
	<!-- Banner -->
	<div class="banner">
		<img src="images/home.png" alt="PIXEL-TRIBE Banner">
	</div>
	<div class="container">
		<!-- 左側 Sidebar -->
		<nav class="sidebar" id="sidebar">
			<button class="sidebar-toggle" id="sidebar-toggle" title="收合/展開">≡</button>
			<ul>
				<li class="active" data-page="home"><span class="icon">
						<svg viewBox="0 0 20 20" fill="none" stroke="currentColor"
							stroke-width="2">
                        <path d="M2 10L10 2L18 10" />
                        <path d="M4 10V18H16V10" />
                    </svg>
				</span> <span>首頁</span></li>
				<li data-page="forum"><span class="icon"> <svg
							viewBox="0 0 20 20" fill="none" stroke="currentColor"
							stroke-width="2">
                        <rect x="2" y="4" width="16" height="10" rx="2" />
                        <path d="M6 14V18L10 16L14 18V14" />
                    </svg>
				</span> <span>論壇</span></li>
				<li data-page="news"><span class="icon"> <svg
							viewBox="0 0 20 20" fill="none" stroke="currentColor"
							stroke-width="2">
                        <rect x="2" y="4" width="16" height="12" rx="2" />
                        <path d="M6 8H14M6 12H10" />
                    </svg>
				</span> <span>新聞</span></li>
				<li data-page="shop"><span class="icon"> <svg
							viewBox="0 0 20 20" fill="none" stroke="currentColor"
							stroke-width="2">
                        <rect x="4" y="6" width="12" height="10" rx="2" />
                        <path d="M7 6V4H13V6" />
                    </svg>
				</span> <span>商城</span></li>
			</ul>
		</nav>
		<!-- 主內容區 -->
		<main class="main-content" id="main-content-area">
			<h2>歡迎來到 PixelTribe!</h2>
			<p>請從左側選單選擇「論壇」、「新聞」或「商城」瀏覽內容。</p>
		</main>
	</div>
	<!-- 頁尾 Footer -->
	<footer class="footer">
		<a href="#">關於我們</a> | <a href="#">問題回報</a> | <a href="#">合作提案</a>
	</footer>
	<script>
    // 側邊欄切換功能
    document.querySelectorAll('.sidebar li').forEach(function(item) {
        item.addEventListener('click', function() {
            document.querySelectorAll('.sidebar li').forEach(li => li.classList.remove('active'));
            this.classList.add('active');
            const page = this.getAttribute('data-page');
            loadPage(page);
        });
    });

    // 側邊欄收合/展開
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebar-toggle');
    sidebarToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        sidebar.classList.toggle('collapsed');
    });

    // 點擊 LOGO 回首頁
    document.getElementById('logo-btn').addEventListener('click', function() {
        // 讓首頁按鈕變 active
        document.querySelectorAll('.sidebar li').forEach(li => li.classList.remove('active'));
        document.querySelector('.sidebar li[data-page="home"]').classList.add('active');
        loadPage('home');
    });

    // 動態載入內容
    function loadPage(page) {
        const main = document.getElementById('main-content-area');
        if (page === 'home') {
            main.innerHTML = `
                <h2>歡迎來到 Pixel Tribe！</h2>
                <p>請從左側選單選擇「論壇」、「新聞」或「商城」瀏覽內容。</p>
            `;
        } else if (page === 'forum') {
            fetch('front-end/forumsys/forum-list.html')
                .then(res => res.text())
                .then(html => {
                    main.innerHTML = html;
                    const script = document.createElement('script');
                    script.src = 'front-end/forumsys/allForum.js';
                    main.appendChild(script);
                });
        } else if (page === 'news') {
            main.innerHTML = `<h2>新聞</h2><p>這裡是新聞內容。</p>`;
        } else if (page === 'shop') {
            main.innerHTML = `
                <div class="shop-header">
                    <h2 class="shop-title">🛍 Pixel 商城</h2>
                    <a href='front-end/shopsys/Cart.html' class="cart-button">
                        <span class="cart-icon">🛒</span>
                        <span>購物車</span>
                    </a>
                </div>
                
                <div class="shop-content">
                    <p style="text-align: center; color: #666; font-size: 1.2rem; margin-top: 60px;">
                        商品即將上架，敬請期待！
                    </p>
                </div>
            `;
        }
    }


    // 會員頭像點擊：載入會員中心
    document.getElementById('avatar-btn').addEventListener('click', function() {
        location.href = '/front-end/mem/MemberConsole.html';
    });

    // 登出，恢復為訪客
	const loginBtn = document.getElementById('login-btn');
    const logoutBtn = document.getElementById('logout-btn');
    const memberName = document.getElementById('member-name');
    logoutBtn.addEventListener('click', function() {
        memberName.textContent = '訪客';
        loginBtn.style.display = '';
        logoutBtn.style.display = 'none';
        document.getElementById('avatar-btn').style.display = 'none';
        document.getElementById('member-avatar').src = 'images/default-avatar.png';
    });
    
    // 登入時顯示頭像
    function showLoginState(avatarUrl, name) {
        loginBtn.style.display = 'none';
        logoutBtn.style.display = '';
        document.getElementById('avatar-btn').style.display = '';
        memberName.textContent = name || '會員';
        if (avatarUrl) {
            document.getElementById('member-avatar').src = avatarUrl;
        }
    }
    // 預設為登入狀態（測試用，有後端可換成session控制）
    showLoginState('images/demo-avatar.png', '逵');
    
 // 取得會員資料
    function fetchMemberProfile() {
        // 假設後端API為 /api/member/profile
        fetch('/api/member/profile')
            .then(res => res.json())
            .then(data => {
                if (data.isLogin) {
                    showLoginState(data.avatarUrl || 'images/default-avatar.png', data.memName);
                } else {
                    showLogoutState();
                }
            })
            .catch(() => {
                showLogoutState();
            });
    }

    // 登入狀態
    function showLoginState(avatarUrl, name) {
        document.getElementById('login-btn').style.display = 'none';
        document.getElementById('register-btn').style.display = 'none';
        document.getElementById('logout-btn').style.display = '';
        document.getElementById('avatar-btn').style.display = '';
        document.getElementById('member-name').textContent = name || '會員';
        document.getElementById('member-avatar').src = avatarUrl || 'images/default-avatar.png';
    }

    // 登出（或尚未登入）狀態
    function showLogoutState() {
        document.getElementById('login-btn').style.display = '';
        document.getElementById('register-btn').style.display = '';
        document.getElementById('logout-btn').style.display = 'none';
        document.getElementById('avatar-btn').style.display = 'none';
        document.getElementById('member-name').textContent = '訪客';
        document.getElementById('member-avatar').src = 'images/default-avatar.png';
    }

    // 頁面一開始載入會員資料
    fetchMemberProfile();

    document.getElementById('logout-btn').addEventListener('click', function() {
        // 你可以加上呼叫後端登出API邏輯
        // fetch('/api/member/logout', {method: 'POST'})...
        showLogoutState();
    });

</script>
</body>
</html>
