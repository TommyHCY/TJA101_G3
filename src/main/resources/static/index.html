<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<title>ApexForum - Ultimate Forum & Community Discussions HTML-->
    <!--	Template</title>-->
    <title>像素部落(Pixel Tribe)</title>
    <meta name="description"
          content="Forum & Community Discussions HTML Template">
    <meta name="keywords"
          content="bootstrap 5, forum, community, support, social, q&a, mobile, html">
    <meta name="robots" content="all,follow">

    <script src="/js/dynamicHeaderInfo.js"></script>
    <script>
        //Check local storage
        let localS = localStorage.getItem('theme')
        themeToSet = localS

        // If local storage is not set, we check the OS preference
        if (!localS) {
            themeToSet = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark'
                : 'light'
        }

        //Set the correct theme
        document.documentElement.setAttribute('data-theme', themeToSet)
    </script>

    <!-- ==============================================
             CSS Styles
            =============================================== -->
    <link rel="stylesheet" href="assets/vendors/bootstrap/bootstrap.min.css">
    <link rel="stylesheet"
          href="assets/vendors/bootstrap-icons/bootstrap-icons.css">
    <link rel="stylesheet" href="assets/vendors/simplebar/simplebar.min.css">
    <link rel="stylesheet" href="assets/vendors/aos/aos.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="stylesheet" href="/front-end/minigame/miniGame.css">
    <style>
        #konami-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.85);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-in-out;
        }

        #konami-overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        #konami-overlay img {
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            opacity: 0.8;
        }

         .combo-icons {
             bottom: 10px;
             /*right: 10px;*/
             font-size: 2rem;
             animation: blinkCombo 0.8s infinite alternate ease-in-out;
             z-index: 999;
         }

        @keyframes blinkCombo {
            from { opacity: 0; transform: scale(1); }
            to   { opacity: 1; transform: scale(1.05); }
        }

        #combo-hint i,
        #combo-hint span {
            margin: 0 4px;
        }

    </style>

    <!-- ==============================================
             Fonts
            =============================================== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Karla&display=swap"
          rel="stylesheet">

</head>
<body>
<!-- Switcher Icon -->
<div class="switcher switcher-show" id="theme-switcher">
    <i id="switcher-icon" class="bi bi-moon"></i>
</div>

<!-- Back to Top -->
<a href="#" id="back-to-top"></a>

<div class="vine-wrapper">

    <div id="header-placeholder"></div>
    <section class="vine-hero bg-img-1">
        <div class="container">
            <div class="row">

                <!-- HERO TEXT -->
                <div class="col-xl-6 col-lg-6 col-md-12">
                    <div
                            class="banner-content d-flex flex-column justify-content-center align-items-center h-100"
                            data-aos="fade-right" data-aos-easing="linear">
                        <div class="hero-logo">
                            <img src="/images/logo.png" alt="Pixel Tribe Logo">
                        </div>
                        <div id="combo-hint" class="position-absolute combo-icons text-white">
                            <i class="bi bi-arrow-down"></i>
                            <i class="bi bi-arrow-right"></i>
                            <i class="bi bi-arrow-down"></i>
                            <i class="bi bi-arrow-right"></i>
                            <i class="bi bi-plus-lg"></i>
                            <span class="fw-bold">P</span>
                        </div>

                        <!-- Title -->
                        <h1>像素部落(Pixel Tribe)</h1>
                        <h1>遊戲愛好者的聚集地</h1>

                    </div>
                </div>
                <!-- END HERO TEXT -->


                <!-- HERO IMAGE -->
                <div
                        class="col-xl-6 col-lg-6 col-md-12 d-flex justify-content-center d-none d-lg-block"
                        data-aos="fade-left" data-aos-easing="linear">
                    <img src="images/Hero.gif" alt="Hero">
                </div>


            </div>
        </div>
    </section>
    <!-- ==============================================
Main
=============================================== -->
    <section class="vine-main">
        <div class="container">
            <div class="row">
                <div class="col-lg-9 pe-lg-5">

                    <div class="discussions">

                        <!-- ======== NEWS CAROUSEL START ======== -->
                        <div class="news-carousel mb-5" data-aos="fade-up"
                             data-aos-easing="linear">
                            <h4 class="section-title">最新新聞</h4>

                            <div id="newsCarousel" class="carousel slide"
                                 data-bs-ride="carousel">
                                <div class="carousel-inner"></div>

                                <!-- 左右箭頭（不變） -->
                                <button class="carousel-control-prev" type="button"
                                        data-bs-target="#newsCarousel" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button"
                                        data-bs-target="#newsCarousel" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
                            </div>
                            <!--/newsCarousel-->
                        </div>
                        <!--/news-carousel-->

                        <!-- ======== NEWS CAROUSEL  END  ======== -->


                        <div class="hot-section mb-5" data-aos="fade-up">
                            <h4 class="section-title">熱門討論區</h4>
                            <div id="hot-forums-container" class="row g-3">
                                <div id="hot-forums-col-1"
                                     class="col-lg-6 d-flex flex-column gap-3"></div>
                                <div id="hot-forums-col-2"
                                     class="col-lg-6 d-flex flex-column gap-3"></div>

                                <div id="initial-spinner" class="col-12 text-center p-5">
                                    <div class="spinner-border" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--/post-box-2-->
                    </div>
                    <!--/Discussions-->

                    <!--                    <div class="pagination" data-aos="fade-up" data-aos-easing="linear">-->

                    <!--                        <a href="#" class="page-numbers btn-start">-->
                    <!--                            <i class="b bi-chevron-double-left"></i>-->
                    <!--                        </a>-->

                    <!--                        <a href="#" class="page-numbers btn&#45;&#45;prev">-->
                    <!--                            <i class="bi bi-chevron-left"></i>-->
                    <!--                        </a>-->
                    <!--                        <span class="page-numbers pagination-space"> <i class="bi bi-three-dots"></i> </span>-->
                    <!--                        <a href="#" class="page-numbers current"><span>1</span></a>-->
                    <!--                        <a href="#" class="page-numbers"><span>2</span></a>-->
                    <!--                        <a href="#" class="page-numbers"><span>3</span></a>-->
                    <!--                        <a href="#" class="page-numbers"><span>4</span></a>-->
                    <!--                        <a href="#" class="page-numbers"><span>5</span></a>-->
                    <!--                        <a href="#" class="page-numbers"><span>6</span></a>-->

                    <!--                        <span class="page-numbers pagination-space"> <i class="bi bi-three-dots"></i></span>-->
                    <!--                        <a href="#" class="page-numbers btn&#45;&#45;next">-->
                    <!--                            <i class="bi bi-chevron-right"></i>-->
                    <!--                        </a>-->

                    <!--                        <a href="#" class="page-numbers btn-end">-->
                    <!--                            <i class="bi bi-chevron-double-right"></i>-->
                    <!--                        </a>-->

                    <!--                        <span class="page-numbers all-pages">-->
                    <!--								70 Pages-->
                    <!--							</span>-->

                    <!--                    </div>&lt;!&ndash;/pagination&ndash;&gt;-->

                </div>
                <div class="col-lg-3">

                    <div class="top-users" data-aos="fade-left"
                         data-aos-easing="linear">

                        <div class="mx-3 mb-2">
                            <h4>會員遊戲榜</h4>
                            <p>獲得最多遊戲點的人。</p>
                        </div>
                        <ul id="top-users-list" class="list-group list-group-flush"></ul>

                    </div>

                    <div class="new-discussions mx-3 my-5" data-aos="fade-left"
                         data-aos-easing="linear">
                        <div class="position-relative zindex-2">
                            <h4>New Discussions</h4>
                            <ul class="list-unstyled mb-0 mt-3">
                                <li class="pb-3 mb-2">
                                    <h4 class="h6 mb-2">
                                        <a href="#">What is one thing you are grateful for?</a>
                                    </h4>
                                    <div class="d-flex align-items-center text-muted pt-1">
                                        <img src="assets/img/avatar/2.jpg"
                                             class="avatar avatar-xs avatar-rounded me-2" alt="User">
                                        <div class="fs-xs pe-3 me-3 pt-2">
                                            <p>Adaline Riley</p>
                                            <span class="d-block">2 mins ago</span>
                                        </div>
                                        <div class="d-flex align-items-center me-3">
                                            <i class="bi bi-caret-up-fill fs-base me-1"></i> <span
                                                class="fs-xs">8</span>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <i class="bi bi-chat-dots fs-base me-1"></i> <span
                                                class="fs-xs">4</span>
                                        </div>
                                    </div>
                                </li>
                                <li class="pb-3 mb-2">
                                    <h4 class="h6 mb-2">
                                        <a href="#">Most useful launch strategy?</a>
                                    </h4>
                                    <div class="d-flex align-items-center text-muted pt-1">
                                        <img src="assets/img/avatar/3.jpg"
                                             class="avatar avatar-xs avatar-rounded me-2" alt="User">
                                        <div class="fs-xs pe-3 me-3 pt-2">
                                            <p>Buster Jayden</p>
                                            <span class="d-block">6 Mins ago</span>
                                        </div>
                                        <div class="d-flex align-items-center me-3">
                                            <i class="bi bi-caret-up-fill fs-base me-1"></i> <span
                                                class="fs-xs">1</span>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <i class="bi bi-chat-dots fs-base me-1"></i> <span
                                                class="fs-xs">0</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <h4 class="h6 mb-2">
                                        <a href="#">As a CEO, should your code be auto-merged?</a>
                                    </h4>
                                    <div class="d-flex align-items-center text-muted pt-1">
                                        <img src="assets/img/avatar/4.jpg"
                                             class="avatar avatar-xs avatar-rounded me-2" alt="User">
                                        <div class="fs-xs pe-3 me-3 pt-2">
                                            <p>Louisa Triston</p>
                                            <span class="d-block">12 hours ago</span>
                                        </div>
                                        <div class="d-flex align-items-center me-3">
                                            <i class="bi bi-caret-up-fill fs-base me-1"></i> <span
                                                class="fs-xs">1</span>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <i class="bi bi-chat-dots fs-base me-1"></i> <span
                                                class="fs-xs">0</span>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!--/new-discussions-->

                </div>
            </div>
        </div>
    </section>


    <div id="footer-placeholder"></div>
</div>
<!--/vine-wrapper-->


<!-- 燈箱  -->
<div id="newsLightboxes"></div>
<div id="konami-overlay">
    <img src="/images/loginAdmin.gif" alt="Admin Secret Login">
</div>
<canvas id="miniGameCanvas" width="480" height="640"></canvas>

<!-- ==============================Scripts========================================== -->
<script src="assets/js/global-loader.js"></script>
<script src="/front-end/minigame/miniGame.js" defer></script>
<script src="assets/vendors/jquery/jquery.min.js"></script>
<script src="assets/vendors/bootstrap/bootstrap.bundle.js"></script>
<script src="assets/vendors/popper/popper.min.js"></script>
<script src="assets/vendors/simplebar/simplebar.min.js"></script>
<script src="assets/js/main.js"></script>
<script src="assets/vendors/aos/aos.js"></script>
<script src="front-end/forumsys/index-hot-loader.js"></script>
<script src="front-end/newspage/news-carousel.js"></script>
<script src="js/dynamicHeaderInfo.js"></script>
<script src="js/enterasmin.js"></script>
<script>
    (async function loadTopUsers() {
        try {
            const res = await fetch('/api/members/game-score');
            if (!res.ok) throw new Error(res.status);
            const list = await res.json();

            const top10 = list
                .filter(u => u.point && u.point > 0)   // 排除 0 分
                .sort((a, b) => b.point - a.point)     // 分數高→低
                .slice(0, 10);                         // 取前 10 名

            const ul = document.getElementById('top-users-list');
            if (!ul) return;

            ul.innerHTML = top10.map(u => `
      <li class="list-group-item border-0">
        <div class="media align-items-center">
          <div class="media-head me-3">
            <div class="avatar avatar-sm">
              <img src="/images/memberAvatar/mem${u.id}.png"
                   alt="${u.memNickName ?? u.memName}"
                   class="avatar-img avatar-rounded"
                    onerror="this.onerror=null;this.src='/images/memberAvatar/defaultmem.png';">
            </div>
          </div>
          <div class="media-body flex-grow-1">
            <p href="/member/${u.id}/profile">${u.memNickName ?? u.memName}</p>
          </div>
          <p class="mb-0"><i class="bi bi-trophy-fill text-warning"></i> ${u.point}</p>
        </div>
      </li>
    `).join('');
        } catch (err) {
            console.error('載入會員貢獻榜失敗', err);
        }
    })();
</script>
</body>
</html>